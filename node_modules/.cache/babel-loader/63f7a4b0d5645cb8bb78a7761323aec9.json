{"remainingRequest":"E:\\ai_web\\AI_web\\AI_learning_teacher\\node_modules\\babel-loader\\lib\\index.js!E:\\ai_web\\AI_web\\AI_learning_teacher\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\ai_web\\AI_web\\AI_learning_teacher\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ai_web\\AI_web\\AI_learning_teacher\\src\\views\\course_add\\create_subject_and_upload.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\ai_web\\AI_web\\AI_learning_teacher\\src\\views\\course_add\\create_subject_and_upload.vue","mtime":1745837961620},{"path":"E:\\ai_web\\AI_web\\AI_learning_teacher\\babel.config.js","mtime":1745490714412},{"path":"E:\\ai_web\\AI_web\\AI_learning_teacher\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745493482913},{"path":"E:\\ai_web\\AI_web\\AI_learning_teacher\\node_modules\\babel-loader\\lib\\index.js","mtime":1745493489544},{"path":"E:\\ai_web\\AI_web\\AI_learning_teacher\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745493482913},{"path":"E:\\ai_web\\AI_web\\AI_learning_teacher\\node_modules\\vue-loader\\lib\\index.js","mtime":1745493493155}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJFOi9haV93ZWIvQUlfd2ViL0FJX2xlYXJuaW5nX3RlYWNoZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzIjsKaW1wb3J0IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIGZyb20gIkU6L2FpX3dlYi9BSV93ZWIvQUlfbGVhcm5pbmdfdGVhY2hlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW50ZXJvcFJlcXVpcmVXaWxkY2FyZC5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkU6L2FpX3dlYi9BSV93ZWIvQUlfbGVhcm5pbmdfdGVhY2hlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQuaXRlcmF0b3IuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgovLyDnq6DoioLnm7jlhbPmjqXlj6MKaW1wb3J0IHsgbGlzdCBhcyBsaXN0Q2hhcHRlciwgY3JlYXRlSXQgYXMgX2NyZWF0ZUNoYXB0ZXIsIHVwZGF0ZUl0IGFzIF91cGRhdGVDaGFwdGVyLCBkZWxldGVJdCBhcyBfZGVsZXRlQ2hhcHRlciB9IGZyb20gJ0AvYXBpL2NoYXB0ZXJfdG1wJzsKLy8g6KeG6aKR55u45YWz5o6l5Y+jCmltcG9ydCB7IGxpc3QgYXMgbGlzdFZpZGVvLCB1cGRhdGVJdCBhcyBfdXBkYXRlVmlkZW8sIGRlbGV0ZUl0IGFzIF9kZWxldGVWaWRlbyB9IGZyb20gJ0AvYXBpL3ZpZGVvX3RtcCc7Ci8v6K6y5LmJ55u45YWz5o6l5Y+jCi8vIGltcG9ydCB7Ci8vICAgbGlzdCBhcyBsaXN0RG9jdW1lbnQsCi8vICAgdXBkYXRlSXQgYXMgdXBkYXRlRG9jdW1lbnQsCi8vICAgZGVsZXRlSXQgYXMgZGVsZXRlRG9jdW1lbnQKLy8gfSBmcm9tICdAL2FwaS9kb2N1bWVudF90bXAnCgovLyDmlLnkuLrnqbrlrp7njrDmiJZtb2Nr5pWw5o2uCi8vIOS/ruaUuW1vY2vlh73mlbDvvIznp7vpmaTlr7l0aGlz55qE5L6d6LWWCnZhciBsaXN0RG9jdW1lbnQgPSBmdW5jdGlvbiBsaXN0RG9jdW1lbnQoY2hhcHRlcklkKSB7CiAgLy8g5L2/55So5Zu65a6abW9ja+aVsOaNru+8iOS4jeWGjeS+nei1lnRoaXMuY2hhcHRlcnPvvIkKICB2YXIgbW9ja1RlbXBsYXRlcyA9IFt7CiAgICB0aXRsZTogJ+i9r+S7tuW3peeoi+ivvueoi+iusuS5iS5wZGYnLAogICAgc2l6ZTogMTAyNCAqIDI0NTAsCiAgICB0eXBlOiAncGRmJwogIH0sIHsKICAgIHRpdGxlOiAn5pWZ5a2mUFBULnBwdHgnLAogICAgc2l6ZTogMTAyNCAqIDU4NzAsCiAgICB0eXBlOiAncHB0eCcKICB9XTsKICB2YXIgZG9jdW1lbnRzID0gbW9ja1RlbXBsYXRlcy5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICByZXR1cm4gewogICAgICBpZDogImRvY18iLmNvbmNhdChjaGFwdGVySWQsICJfIikuY29uY2F0KGluZGV4KSwKICAgICAgdGl0bGU6IGl0ZW0udGl0bGUsCiAgICAgIHNpemU6IGl0ZW0uc2l6ZSwKICAgICAgY2hhcHRlcklkOiBjaGFwdGVySWQsCiAgICAgIHNvcnQ6IGluZGV4ICsgMSwKICAgICAgdXJsOiAiL2RvY3VtZW50cy8iLmNvbmNhdChjaGFwdGVySWQsICJfIikuY29uY2F0KGluZGV4LCAiLiIpLmNvbmNhdChpdGVtLnR5cGUpCiAgICB9OwogIH0pOwogIHJldHVybiBQcm9taXNlLnJlc29sdmUoewogICAgZGF0YTogZG9jdW1lbnRzLAogICAgbWVzc2FnZTogJ3N1Y2Nlc3MnCiAgfSk7Cn07CnZhciBfdXBkYXRlRG9jdW1lbnQgPSBmdW5jdGlvbiB1cGRhdGVEb2N1bWVudChkYXRhKSB7CiAgY29uc29sZS5sb2coJ+aooeaLn+abtOaWsOiusuS5iTonLCBkYXRhKTsKICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsKICAgIG1lc3NhZ2U6ICforrLkuYnmm7TmlrDmiJDlip8nLAogICAgZGF0YTogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkYXRhKSwge30sIHsKICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkKICAgIH0pCiAgfSk7Cn07CnZhciBfZGVsZXRlRG9jdW1lbnQgPSBmdW5jdGlvbiBkZWxldGVEb2N1bWVudChpZCkgewogIGNvbnNvbGUubG9nKCfmqKHmi5/liKDpmaTorrLkuYk6JywgaWQpOwogIHJldHVybiBQcm9taXNlLnJlc29sdmUoewogICAgbWVzc2FnZTogIlx1OEJCMlx1NEU0OVtJRDoiLmNvbmNhdChpZCwgIl1cdTUyMjBcdTk2NjRcdTYyMTBcdTUyOUYiKSwKICAgIGNvZGU6IDIwMAogIH0pOwp9OwppbXBvcnQgeyBieXRlc1RvU2l6ZSBhcyBfYnl0ZXNUb1NpemUgfSBmcm9tICdAL3V0aWxzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDcmVhdGVTdWJqZWN0QW5kVXBsb2FkJywKICBjb21wb25lbnRzOiB7CiAgICAndi11cGxvYWQtdmlkZW8nOiBmdW5jdGlvbiB2VXBsb2FkVmlkZW8oKSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgnQC92aWV3cy9jb3Vyc2VfdXBkYXRlL3VwbG9hZCcpKTsKICAgICAgfSk7CiAgICB9LAogICAgJ3YtdXBsb2FkLWRvY3VtZW50JzogZnVuY3Rpb24gdlVwbG9hZERvY3VtZW50KCkgewogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoJ0Avdmlld3MvY291cnNlX3VwZGF0ZS91cGxvYWRfZG9jdW1lbnQnKSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHZ1ZS9yZXF1aXJlLXByb3AtdHlwZXMKICBwcm9wczogWydjb3Vyc2UnXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdmFyIF9yZWY7CiAgICByZXR1cm4gX3JlZiA9IHsKICAgICAgY2hhcHRlcnM6IFtdLAogICAgICAvLyDnq6DoioJpZOS4juinhumikeWIl+ihqOaYoOWwhDxjaGFwdGVySWQsWy4uLnZpZGVvc10+CiAgICAgIGNoYXB0ZXJJZFZpZGVvTWFwOiB7fSwKICAgICAgYWRkT3JVcGRhdGVDaGFwdGVyOiB7CiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIHNvcnQ6IDAKICAgICAgfSwKICAgICAgdXBkYXRlVmlkZW9EYXRhOiB7CiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIHNvcnQ6IDAsCiAgICAgICAgZnJlZTogdHJ1ZQogICAgICB9LAogICAgICAvLyDnq6DoioJpZOS4juiusuS5ieWIl+ihqOaYoOWwhAogICAgICBjaGFwdGVySWREb2N1bWVudE1hcDoge30KICAgIH0sIF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfcmVmLCAiYWRkT3JVcGRhdGVDaGFwdGVyIiwgewogICAgICB0aXRsZTogJycsCiAgICAgIHNvcnQ6IDAKICAgIH0pLCAidXBkYXRlVmlkZW9EYXRhIiwgewogICAgICB0aXRsZTogJycsCiAgICAgIHNvcnQ6IDAsCiAgICAgIGZyZWU6IHRydWUKICAgIH0pLCAidXBkYXRlRG9jdW1lbnREYXRhIiwgewogICAgICB0aXRsZTogJycsCiAgICAgIHNvcnQ6IDAKICAgIH0pLCAiYWRkQ2hhcHRlckRpYWxvZ1Zpc2libGUiLCBmYWxzZSksICJ1cGRhdGVDaGFwdGVyRGlhbG9nVmlzaWJsZSIsIGZhbHNlKSwgImRlbGV0ZUNoYXB0ZXJEaWFsb2dWaXNpYmxlIiwgZmFsc2UpLCAidGFibGVSZWZyZXNoSW5kZXgiLCAwKSwgInVwbG9hZFZpZGVvRGlhbG9nVmlzaWJsZSIsIGZhbHNlKSwgInVwbG9hZFZpZGVvRGlhbG9nVGl0bGUiLCAnJyksICJ1cGRhdGVWaWRlb0RpYWxvZ1Zpc2libGUiLCBmYWxzZSksIF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9yZWYsICJ1cGxvYWREb2N1bWVudERpYWxvZ1Zpc2libGUiLCBmYWxzZSksICJ1cGxvYWREb2N1bWVudERpYWxvZ1RpdGxlIiwgJycpLCAidXBkYXRlRG9jdW1lbnREaWFsb2dWaXNpYmxlIiwgZmFsc2UpOwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0Q2hhcHRlckxpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOWtl+iKgui9rOaNogogICAgYnl0ZXNUb1NpemU6IGZ1bmN0aW9uIGJ5dGVzVG9TaXplKGJ5dGVzKSB7CiAgICAgIHJldHVybiBfYnl0ZXNUb1NpemUoYnl0ZXMpOwogICAgfSwKICAgIGdldENoYXB0ZXJMaXN0OiBmdW5jdGlvbiBnZXRDaGFwdGVyTGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgbGlzdENoYXB0ZXIodGhpcy5jb3Vyc2UuaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBfdGhpcy5jaGFwdGVycyA9IHJlc3AuZGF0YSB8fCBbXTsKICAgICAgICAvLyDkvb/nlKhWdWUuc2V056Gu5L+d5ZON5bqU5byPLOS/neivgeWIl+ihqOWxleekugogICAgICAgIF90aGlzLmNoYXB0ZXJzLmZvckVhY2goZnVuY3Rpb24gKGMpIHsKICAgICAgICAgIF90aGlzLiRzZXQoX3RoaXMuY2hhcHRlcklkVmlkZW9NYXAsIGMuaWQsIFtdKTsKICAgICAgICAgIF90aGlzLiRzZXQoX3RoaXMuY2hhcHRlcklkRG9jdW1lbnRNYXAsIGMuaWQsIFtdKTsKICAgICAgICB9KTsKICAgICAgICAvLyDpu5jorqTliqDovb3nrKzkuIDkuKrnq6DoioLnmoTmlbDmja4KICAgICAgICBpZiAoX3RoaXMuY2hhcHRlcnMubGVuZ3RoID4gMCkgewogICAgICAgICAgX3RoaXMuY2hhbmdlKF90aGlzLmNoYXB0ZXJzWzBdLmlkKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPlueroOiKguWksei0pTonLCBlcnJvcik7CiAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPlueroOiKguaVsOaNruWksei0pScpOwogICAgICB9KTsKICAgIH0sCiAgICBvcGVuQWRkQ2hhcHRlckRpYWxvZzogZnVuY3Rpb24gb3BlbkFkZENoYXB0ZXJEaWFsb2coKSB7CiAgICAgIHRoaXMuYWRkT3JVcGRhdGVDaGFwdGVyID0gewogICAgICAgIHRpdGxlOiAnJywKICAgICAgICBzb3J0OiAwCiAgICAgIH07CiAgICAgIHRoaXMuYWRkQ2hhcHRlckRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIG9wZW5VcGRhdGVDaGFwdGVyRGlhbG9nOiBmdW5jdGlvbiBvcGVuVXBkYXRlQ2hhcHRlckRpYWxvZyhjdXJEYXRhKSB7CiAgICAgIHRoaXMuYWRkT3JVcGRhdGVDaGFwdGVyID0gX29iamVjdFNwcmVhZCh7fSwgY3VyRGF0YSk7CiAgICAgIHRoaXMudXBkYXRlQ2hhcHRlckRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIG9wZW5EZWxldGVDaGFwdGVyRGlhbG9nOiBmdW5jdGlvbiBvcGVuRGVsZXRlQ2hhcHRlckRpYWxvZyhjdXJEYXRhKSB7CiAgICAgIHRoaXMuYWRkT3JVcGRhdGVDaGFwdGVyID0gX29iamVjdFNwcmVhZCh7fSwgY3VyRGF0YSk7CiAgICAgIHRoaXMuZGVsZXRlQ2hhcHRlckRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIC8vIOS4iuS8oOinhumikQogICAgb3BlblVwbG9hZFZpZGVvRGlhbG9nOiBmdW5jdGlvbiBvcGVuVXBsb2FkVmlkZW9EaWFsb2coY3VyRGF0YSkgewogICAgICB0aGlzLnVwbG9hZFZpZGVvRGlhbG9nVGl0bGUgPSAiXHU0RTBBXHU0RjIwXHU4OUM2XHU5ODkxXHU4MUYzXHU3QUUwXHU4MjgyWyIuY29uY2F0KGN1ckRhdGEudGl0bGUsICJdIik7CiAgICAgIHRoaXMudXBsb2FkVmlkZW9EaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgY291cnNlSWQ6IHRoaXMuY291cnNlLmlkLAogICAgICAgIGNoYXB0ZXJJZDogY3VyRGF0YS5pZAogICAgICB9OwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLiRyZWZzLlVwbG9hZFZpZGVvLnNldERhdGEoZGF0YSk7CiAgICAgIH0uYmluZCh0aGlzKSwgMTAwKTsKICAgIH0sCiAgICAvLyDkuIrkvKDorrLkuYkKICAgIG9wZW5VcGxvYWREb2N1bWVudERpYWxvZzogZnVuY3Rpb24gb3BlblVwbG9hZERvY3VtZW50RGlhbG9nKGN1ckRhdGEpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHRoaXMudXBsb2FkRG9jdW1lbnREaWFsb2dUaXRsZSA9ICJcdTRFMEFcdTRGMjBcdThCQjJcdTRFNDlcdTgxRjNcdTdBRTBcdTgyODJbIi5jb25jYXQoY3VyRGF0YS50aXRsZSwgIl0iKTsKICAgICAgdGhpcy51cGxvYWREb2N1bWVudERpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBjb3Vyc2VJZDogdGhpcy5jb3Vyc2UuaWQsCiAgICAgICAgY2hhcHRlcklkOiBjdXJEYXRhLmlkCiAgICAgIH07CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi4kcmVmcy5VcGxvYWREb2N1bWVudC5zZXREYXRhKGRhdGEpOwogICAgICB9LCAxMDApOwogICAgfSwKICAgIC8vIOS4iuS8oOiusuS5ieWvueivneahhuWFs+mXreaXtuabtOaWsOS/oeaBrwogICAgdXBsb2FkRG9jdW1lbnREaWFsb2dCZWZvcmVDbG9zZTogZnVuY3Rpb24gdXBsb2FkRG9jdW1lbnREaWFsb2dCZWZvcmVDbG9zZShkb25lKSB7CiAgICAgIHRoaXMuY2hhbmdlKHRoaXMuJHJlZnMuVXBsb2FkRG9jdW1lbnQuZGF0YS5jaGFwdGVySWQpOwogICAgICBkb25lKCk7CiAgICB9LAogICAgb3BlblVwZGF0ZVZpZGVvRGlhbG9nVmlzaWJsZTogZnVuY3Rpb24gb3BlblVwZGF0ZVZpZGVvRGlhbG9nVmlzaWJsZShjdXJEYXRhKSB7CiAgICAgIHRoaXMudXBkYXRlVmlkZW9EaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy51cGRhdGVWaWRlb0RhdGEgPSBfb2JqZWN0U3ByZWFkKHt9LCBjdXJEYXRhKTsKICAgIH0sCiAgICAvLyDmlrDlu7rnq6DoioIKICAgIGNyZWF0ZUNoYXB0ZXI6IGZ1bmN0aW9uIGNyZWF0ZUNoYXB0ZXIoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB0aGlzLmFkZE9yVXBkYXRlQ2hhcHRlci5jb3Vyc2VJZCA9IHRoaXMuY291cnNlLmlkOwogICAgICBfY3JlYXRlQ2hhcHRlcih0aGlzLmFkZE9yVXBkYXRlQ2hhcHRlcikudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIF90aGlzMy4kbWVzc2FnZS5zdWNjZXNzKHJlc3AubWVzc2FnZSk7CiAgICAgICAgX3RoaXMzLmdldENoYXB0ZXJMaXN0KCk7CiAgICAgICAgX3RoaXMzLmFkZENoYXB0ZXJEaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOS/ruaUueeroOiKggogICAgdXBkYXRlQ2hhcHRlcjogZnVuY3Rpb24gdXBkYXRlQ2hhcHRlcigpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHRoaXMuYWRkT3JVcGRhdGVDaGFwdGVyLmNvdXJzZUlkID0gdGhpcy5jb3Vyc2UuaWQ7CiAgICAgIF91cGRhdGVDaGFwdGVyKHRoaXMuYWRkT3JVcGRhdGVDaGFwdGVyKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgX3RoaXM0LiRtZXNzYWdlLnN1Y2Nlc3MocmVzcC5tZXNzYWdlKTsKICAgICAgICBfdGhpczQuZ2V0Q2hhcHRlckxpc3QoKTsKICAgICAgICBfdGhpczQudXBkYXRlQ2hhcHRlckRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5Yig6Zmk56ug6IqCCiAgICBkZWxldGVDaGFwdGVyOiBmdW5jdGlvbiBkZWxldGVDaGFwdGVyKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgX2RlbGV0ZUNoYXB0ZXIodGhpcy5hZGRPclVwZGF0ZUNoYXB0ZXIuaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBfdGhpczUuJG1lc3NhZ2Uuc3VjY2VzcyhyZXNwLm1lc3NhZ2UpOwogICAgICAgIF90aGlzNS5nZXRDaGFwdGVyTGlzdCgpOwogICAgICAgIF90aGlzNS5kZWxldGVDaGFwdGVyRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDnq6DoioLliIfmjaLml7bliqDovb3op4bpopHlkozorrLkuYnmlbDmja4KICAgIGNoYW5nZTogZnVuY3Rpb24gY2hhbmdlKGlkKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwogICAgICBpZiAoaWQpIHsKICAgICAgICAvLyDojrflj5bnq6DoioLop4bpopHkv6Hmga8KICAgICAgICBsaXN0VmlkZW8oaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgIF90aGlzNi5jaGFwdGVySWRWaWRlb01hcFtpZF0gPSByZXNwLmRhdGE7CiAgICAgICAgfSk7CiAgICAgICAgLy8g6I635Y+W56ug6IqC6K6y5LmJ5L+h5oGvCiAgICAgICAgbGlzdERvY3VtZW50KGlkKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICBfdGhpczYuY2hhcHRlcklkRG9jdW1lbnRNYXBbaWRdID0gcmVzcC5kYXRhOwogICAgICAgIH0pOwogICAgICAgICsrdGhpcy50YWJsZVJlZnJlc2hJbmRleDsKICAgICAgfQogICAgfSwKICAgIC8vIOS4iuS8oOWvueivneahhuWFs+mXreaXtuabtOaWsOS/oeaBrwogICAgdXBsb2FkRGlhbG9nQmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIHVwbG9hZERpYWxvZ0JlZm9yZUNsb3NlKGRvbmUpIHsKICAgICAgdGhpcy5jaGFuZ2UodGhpcy4kcmVmcy5VcGxvYWRWaWRlby5kYXRhLmNoYXB0ZXJJZCk7CiAgICAgIGRvbmUoKTsKICAgIH0sCiAgICAvLyDliKDpmaTop4bpopEKICAgIGRlbGV0ZVZpZGVvOiBmdW5jdGlvbiBkZWxldGVWaWRlbyhjdXJEYXRhKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwogICAgICBfZGVsZXRlVmlkZW8oY3VyRGF0YS5pZCkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIF90aGlzNy4kbWVzc2FnZS5zdWNjZXNzKHJlc3AubWVzc2FnZSk7CiAgICAgICAgX3RoaXM3LmNoYW5nZShjdXJEYXRhLmNoYXB0ZXJJZCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOabtOaWsOinhumikQogICAgdXBkYXRlVmlkZW86IGZ1bmN0aW9uIHVwZGF0ZVZpZGVvKCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKICAgICAgX3VwZGF0ZVZpZGVvKHRoaXMudXBkYXRlVmlkZW9EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgX3RoaXM4LiRtZXNzYWdlLnN1Y2Nlc3MocmVzcC5tZXNzYWdlKTsKICAgICAgICBfdGhpczguY2hhbmdlKF90aGlzOC51cGRhdGVWaWRlb0RhdGEuY2hhcHRlcklkKTsKICAgICAgICBfdGhpczgudXBkYXRlVmlkZW9EaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOaJk+W8gOS/ruaUueiusuS5ieWvueivneahhgogICAgb3BlblVwZGF0ZURvY3VtZW50RGlhbG9nVmlzaWJsZTogZnVuY3Rpb24gb3BlblVwZGF0ZURvY3VtZW50RGlhbG9nVmlzaWJsZShjdXJEYXRhKSB7CiAgICAgIHRoaXMudXBkYXRlRG9jdW1lbnREaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy51cGRhdGVEb2N1bWVudERhdGEgPSBfb2JqZWN0U3ByZWFkKHt9LCBjdXJEYXRhKTsKICAgIH0sCiAgICAvLyDmm7TmlrDorrLkuYkKICAgIHVwZGF0ZURvY3VtZW50OiBmdW5jdGlvbiB1cGRhdGVEb2N1bWVudCgpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CiAgICAgIF91cGRhdGVEb2N1bWVudCh0aGlzLnVwZGF0ZURvY3VtZW50RGF0YSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIF90aGlzOS4kbWVzc2FnZS5zdWNjZXNzKHJlc3AubWVzc2FnZSk7CiAgICAgICAgX3RoaXM5LmNoYW5nZShfdGhpczkudXBkYXRlRG9jdW1lbnREYXRhLmNoYXB0ZXJJZCk7CiAgICAgICAgX3RoaXM5LnVwZGF0ZURvY3VtZW50RGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliKDpmaTorrLkuYkKICAgIGRlbGV0ZURvY3VtZW50OiBmdW5jdGlvbiBkZWxldGVEb2N1bWVudChjdXJEYXRhKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKICAgICAgX2RlbGV0ZURvY3VtZW50KGN1ckRhdGEuaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBfdGhpczEwLiRtZXNzYWdlLnN1Y2Nlc3MocmVzcC5tZXNzYWdlKTsKICAgICAgICBfdGhpczEwLmNoYW5nZShjdXJEYXRhLmNoYXB0ZXJJZCk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["list","listChapter","createIt","createChapter","updateIt","updateChapter","deleteIt","deleteChapter","listVideo","updateVideo","deleteVideo","listDocument","chapterId","mockTemplates","title","size","type","documents","map","item","index","id","concat","sort","url","Promise","resolve","data","message","updateDocument","console","log","_objectSpread","updatedAt","Date","toISOString","deleteDocument","code","bytesToSize","name","components","vUploadVideo","then","_interopRequireWildcard","require","vUploadDocument","props","_ref","chapters","chapterIdVideoMap","addOrUpdateChapter","updateVideoData","free","chapterIdDocumentMap","_defineProperty","created","getChapterList","methods","bytes","_this","course","resp","forEach","c","$set","length","change","catch","error","$message","openAddChapterDialog","addChapterDialogVisible","openUpdateChapterDialog","curData","updateChapterDialogVisible","openDeleteChapterDialog","deleteChapterDialogVisible","openUploadVideoDialog","uploadVideoDialogTitle","uploadVideoDialogVisible","courseId","setTimeout","$refs","UploadVideo","setData","bind","openUploadDocumentDialog","_this2","uploadDocumentDialogTitle","uploadDocumentDialogVisible","UploadDocument","uploadDocumentDialogBeforeClose","done","openUpdateVideoDialogVisible","updateVideoDialogVisible","_this3","success","_this4","_this5","_this6","tableRefreshIndex","uploadDialogBeforeClose","_this7","_this8","openUpdateDocumentDialogVisible","updateDocumentDialogVisible","updateDocumentData","_this9","_this10"],"sources":["src/views/course_add/create_subject_and_upload.vue"],"sourcesContent":["<!-- 步骤2 ： 创建章节并上传视频 -->\r\n<template>\r\n  <div>\r\n    <div style=\"margin-bottom: 20px\">\r\n      <el-button type=\"primary\" size=\"small\" @click=\"openAddChapterDialog\">新建章节</el-button>\r\n      <div style=\"float: right;height: 32px;line-height: 32px\">\r\n        <i class=\"el-icon-loading\" />\r\n        正在更新课程《{{ course.title }}》\r\n      </div>\r\n    </div>\r\n    <el-collapse :accordion=\"true\" @change=\"change\">\r\n      <el-collapse-item v-for=\"c of chapters\" :key=\"c.id\" :name=\"c.id\" class=\"chapter-head\">\r\n        <template slot=\"title\">\r\n          <div class=\"sort\">{{ c.sort }}</div>\r\n          <div class=\"title\">{{ c.title }}</div>\r\n          <div class=\"ctrl\">\r\n            <el-button size=\"mini\" type=\"primary\" icon=\"el-icon-upload\" @click.stop=\"openUploadVideoDialog(c)\">视频\r\n            </el-button>\r\n            <el-button size=\"mini\" type=\"warning\" icon=\"el-icon-upload\" @click.stop=\"openUploadDocumentDialog(c)\">讲义\r\n            </el-button>\r\n            <el-button size=\"mini\" type=\"success\" @click.stop=\"openUpdateChapterDialog(c)\">修改</el-button>\r\n            <el-button size=\"mini\" type=\"danger\" @click.stop=\"openDeleteChapterDialog(c)\">删除</el-button>\r\n          </div>\r\n        </template>\r\n        <!-- 视频列表 -->\r\n        <div class=\"table-section\">\r\n          <div class=\"table-title\">\r\n            <i class=\"el-icon-video-camera\"></i>\r\n            <span>视频列表</span>\r\n          </div>\r\n          <el-table :key=\"tableRefreshIndex\" :data=\"chapterIdVideoMap[c.id]\" tooltip-effect=\"dark\"\r\n            :header-cell-style=\"{ fontWeight: 'normal', color: '#666' }\" style=\"font-size: 13px\">\r\n            <el-table-column type=\"index\" />\r\n            <el-table-column prop=\"title\" label=\"名称\" show-tooltip-when-overflow />\r\n            <el-table-column prop=\"duration\" label=\"时长\" width=\"100\" />\r\n            <el-table-column prop=\"size\" label=\"大小\" width=\"120\">\r\n              <template slot-scope=\"scope\">{{ bytesToSize(scope.row.size) }}</template>\r\n            </el-table-column>\r\n            <!-- <el-table-column prop=\"sort\" label=\"排序\" width=\"80\" align=\"center\" /> -->\r\n            <!-- <el-table-column prop=\"sort\" label=\"免费收看\" width=\"100\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n              <span v-if=\"scope.row.free\" style=\"color: #21BA45\">是</span>\r\n              <span v-else>否</span>\r\n            </template>\r\n          </el-table-column> -->\r\n            <el-table-column label=\"操作\" width=\"150\" align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button type=\"primary\" size=\"mini\" @click=\"openUpdateVideoDialogVisible(scope.row)\">修改</el-button>\r\n                <el-popconfirm style=\"margin-left: 10px\" placement=\"top-end\" confirm-button-text=\"确定\"\r\n                  cancel-button-text=\"取消\" icon=\"el-icon-info\" icon-color=\"red\" :title=\"`你要永久删除视频[${scope.row.title}]吗？`\"\r\n                  @confirm=\"deleteVideo(scope.row)\">\r\n                  <el-button slot=\"reference\" type=\"danger\" size=\"mini\">删除</el-button>\r\n                </el-popconfirm>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n        <!-- 讲义列表 -->\r\n        <div class=\"table-section\">\r\n          <div class=\"table-title\">\r\n            <i class=\"el-icon-document\"></i>\r\n            <span>讲义列表</span>\r\n          </div>\r\n          <el-table :key=\"'document_' + tableRefreshIndex\" :data=\"chapterIdDocumentMap[c.id]\" tooltip-effect=\"dark\"\r\n            :header-cell-style=\"{ fontWeight: 'normal', color: '#666' }\" style=\"font-size: 13px\">\r\n            <el-table-column type=\"index\" />\r\n            <el-table-column prop=\"title\" label=\"名称\" show-tooltip-when-overflow />\r\n            <el-table-column prop=\"size\" label=\"大小\" width=\"120\">\r\n              <template slot-scope=\"scope\">{{ bytesToSize(scope.row.size) }}</template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" width=\"150\" align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button type=\"primary\" size=\"mini\" @click=\"openUpdateDocumentDialogVisible(scope.row)\">修改</el-button>\r\n                <el-popconfirm style=\"margin-left: 10px\" placement=\"top-end\" confirm-button-text=\"确定\"\r\n                  cancel-button-text=\"取消\" icon=\"el-icon-info\" icon-color=\"red\" :title=\"`你要永久删除讲义[${scope.row.title}]吗？`\"\r\n                  @confirm=\"deleteDocument(scope.row)\">\r\n                  <el-button slot=\"reference\" type=\"danger\" size=\"mini\">删除</el-button>\r\n                </el-popconfirm>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n      </el-collapse-item>\r\n    </el-collapse>\r\n    <!-- 新建章节 -->\r\n    <el-dialog title=\"新建章节\" :visible.sync=\"addChapterDialogVisible\" destroy-on-close width=\"30vw\"\r\n      :close-on-click-modal=\"false\">\r\n      <el-form :model=\"addOrUpdateChapter\" size=\"small\" label-width=\"100px\">\r\n        <el-form-item label=\"章节名称：\">\r\n          <el-input v-model=\"addOrUpdateChapter.title\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"排　　序：\">\r\n          <el-input-number v-model=\"addOrUpdateChapter.sort\" style=\"width: 100%\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\">\r\n        <el-button type=\"primary\" size=\"small\" @click=\"createChapter\">确 认</el-button>\r\n        <el-button size=\"small\" @click=\"addChapterDialogVisible = false\">取 消</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <!-- 修改章节信息 -->\r\n    <el-dialog title=\"修改章节信息\" :visible.sync=\"updateChapterDialogVisible\" destroy-on-close width=\"30vw\"\r\n      :close-on-click-modal=\"false\">\r\n      <el-form :model=\"addOrUpdateChapter\" size=\"small\" label-width=\"100px\">\r\n        <el-form-item label=\"章节名称：\">\r\n          <el-input v-model=\"addOrUpdateChapter.title\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"排　　序：\">\r\n          <el-input-number v-model=\"addOrUpdateChapter.sort\" style=\"width: 100%\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\">\r\n        <el-button type=\"primary\" size=\"small\" @click=\"updateChapter\">确 认</el-button>\r\n        <el-button size=\"small\" @click=\"updateChapterDialogVisible = false\">取 消</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <!-- 删除章节 -->\r\n    <el-dialog title=\"删除章节\" :visible.sync=\"deleteChapterDialogVisible\" destroy-on-close width=\"30vw\">\r\n      <div style=\"color: red\">该操作将会连带删除章节下的所有视频</div>\r\n      <span slot=\"footer\">\r\n        <el-button type=\"primary\" size=\"small\" @click=\"deleteChapter\">确 认</el-button>\r\n        <el-button size=\"small\" @click=\"deleteChapterDialogVisible = false\">取 消</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <!-- 上传视频 -->\r\n    <el-dialog :title.sync=\"uploadVideoDialogTitle\" :visible.sync=\"uploadVideoDialogVisible\" destroy-on-close\r\n      width=\"30vw\" :close-on-click-modal=\"false\" :before-close=\"uploadDialogBeforeClose\">\r\n      <v-upload-video ref=\"UploadVideo\" />\r\n    </el-dialog>\r\n    <!-- 上传讲义 -->\r\n    <el-dialog :title.sync=\"uploadDocumentDialogTitle\" :visible.sync=\"uploadDocumentDialogVisible\" destroy-on-close\r\n      width=\"30vw\" :close-on-click-modal=\"false\" :before-close=\"uploadDocumentDialogBeforeClose\">\r\n      <v-upload-document ref=\"UploadDocument\" />\r\n    </el-dialog>\r\n    <!-- 修改视频信息 -->\r\n    <el-dialog title=\"修改视频信息\" :visible.sync=\"updateVideoDialogVisible\" destroy-on-close width=\"30vw\">\r\n      <el-form :model=\"updateVideoData\" size=\"small\" label-width=\"100px\">\r\n        <el-form-item label=\"视频名称：\">\r\n          <el-input v-model=\"updateVideoData.title\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"排序：\">\r\n          <el-input-number v-model=\"updateVideoData.sort\" style=\"width: 100%\" />\r\n        </el-form-item>\r\n        <!-- <el-form-item label=\"免费观看：\">\r\n          <el-radio-group v-model=\"updateVideoData.free\">\r\n            <el-radio :label=\"true\">是</el-radio>\r\n            <el-radio :label=\"false\">否</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item> -->\r\n      </el-form>\r\n      <span slot=\"footer\">\r\n        <el-button type=\"primary\" size=\"small\" @click=\"updateVideo\">确 认</el-button>\r\n        <el-button size=\"small\" @click=\"updateVideoDialogVisible = false\">取 消</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <!-- 修改讲义对话框 -->\r\n    <el-dialog title=\"修改讲义信息\" :visible.sync=\"updateDocumentDialogVisible\" destroy-on-close width=\"30vw\">\r\n      <el-form :model=\"updateDocumentData\" size=\"small\" label-width=\"100px\">\r\n        <el-form-item label=\"讲义名称：\">\r\n          <el-input v-model=\"updateDocumentData.title\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"排序：\">\r\n          <el-input-number v-model=\"updateDocumentData.sort\" style=\"width: 100%\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\">\r\n        <el-button type=\"primary\" size=\"small\" @click=\"updateDocument\">确 认</el-button>\r\n        <el-button size=\"small\" @click=\"updateDocumentDialogVisible = false\">取 消</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 章节相关接口\r\nimport {\r\n  list as listChapter,\r\n  createIt as createChapter,\r\n  updateIt as updateChapter,\r\n  deleteIt as deleteChapter\r\n} from '@/api/chapter_tmp'\r\n// 视频相关接口\r\nimport {\r\n  list as listVideo,\r\n  updateIt as updateVideo,\r\n  deleteIt as deleteVideo\r\n} from '@/api/video_tmp'\r\n//讲义相关接口\r\n// import {\r\n//   list as listDocument,\r\n//   updateIt as updateDocument,\r\n//   deleteIt as deleteDocument\r\n// } from '@/api/document_tmp'\r\n\r\n// 改为空实现或mock数据\r\n// 修改mock函数，移除对this的依赖\r\nconst listDocument = (chapterId) => {\r\n  // 使用固定mock数据（不再依赖this.chapters）\r\n  const mockTemplates = [\r\n    {\r\n      title: '软件工程课程讲义.pdf',\r\n      size: 1024 * 2450,\r\n      type: 'pdf'\r\n    },\r\n    {\r\n      title: '教学PPT.pptx',\r\n      size: 1024 * 5870,\r\n      type: 'pptx'\r\n    }\r\n  ]\r\n\r\n  const documents = mockTemplates.map((item, index) => ({\r\n    id: `doc_${chapterId}_${index}`,\r\n    title: item.title,\r\n    size: item.size,\r\n    chapterId: chapterId,\r\n    sort: index + 1,\r\n    url: `/documents/${chapterId}_${index}.${item.type}`\r\n  }))\r\n\r\n  return Promise.resolve({\r\n    data: documents,\r\n    message: 'success'\r\n  })\r\n}\r\n\r\nconst updateDocument = (data) => {\r\n  console.log('模拟更新讲义:', data)\r\n  return Promise.resolve({\r\n    message: '讲义更新成功',\r\n    data: {\r\n      ...data,\r\n      updatedAt: new Date().toISOString()\r\n    }\r\n  })\r\n}\r\n\r\nconst deleteDocument = (id) => {\r\n  console.log('模拟删除讲义:', id)\r\n  return Promise.resolve({\r\n    message: `讲义[ID:${id}]删除成功`,\r\n    code: 200\r\n  })\r\n}\r\nimport { bytesToSize } from '@/utils'\r\n\r\nexport default {\r\n  name: 'CreateSubjectAndUpload',\r\n  components: {\r\n    'v-upload-video': () => import('@/views/course_update/upload'),\r\n    'v-upload-document': () => import('@/views/course_update/upload_document')\r\n  },\r\n  // eslint-disable-next-line vue/require-prop-types\r\n  props: ['course'],\r\n  data() {\r\n    return {\r\n      chapters: [],\r\n      // 章节id与视频列表映射<chapterId,[...videos]>\r\n      chapterIdVideoMap: {},\r\n      addOrUpdateChapter: { title: '', sort: 0 },\r\n      updateVideoData: { title: '', sort: 0, free: true },\r\n      // 章节id与讲义列表映射\r\n      chapterIdDocumentMap: {},\r\n      addOrUpdateChapter: { title: '', sort: 0 },\r\n      updateVideoData: { title: '', sort: 0, free: true },\r\n      //修改讲义数据\r\n      updateDocumentData: { title: '', sort: 0 },\r\n      // 对话框\r\n      addChapterDialogVisible: false,\r\n      updateChapterDialogVisible: false,\r\n      deleteChapterDialogVisible: false,\r\n      tableRefreshIndex: 0,\r\n      // 上传视频\r\n      uploadVideoDialogVisible: false,\r\n      uploadVideoDialogTitle: '',\r\n      // 更新视频\r\n      updateVideoDialogVisible: false,\r\n      // 上传讲义\r\n      uploadDocumentDialogVisible: false,\r\n      uploadDocumentDialogTitle: '',\r\n      // 更新讲义\r\n      updateDocumentDialogVisible: false\r\n\r\n    }\r\n  },\r\n  created() {\r\n    this.getChapterList()\r\n  },\r\n  methods: {\r\n    // 字节转换\r\n    bytesToSize(bytes) {\r\n      return bytesToSize(bytes)\r\n    },\r\n    getChapterList() {\r\n      listChapter(this.course.id).then(resp => {\r\n        this.chapters = resp.data || []\r\n        // 使用Vue.set确保响应式,保证列表展示\r\n        this.chapters.forEach(c => {\r\n          this.$set(this.chapterIdVideoMap, c.id, [])\r\n          this.$set(this.chapterIdDocumentMap, c.id, [])\r\n        })\r\n        // 默认加载第一个章节的数据\r\n        if (this.chapters.length > 0) {\r\n          this.change(this.chapters[0].id)\r\n        }\r\n      }).catch(error => {\r\n        console.error('获取章节失败:', error)\r\n        this.$message.error('获取章节数据失败')\r\n      })\r\n    },\r\n    openAddChapterDialog() {\r\n      this.addOrUpdateChapter = { title: '', sort: 0 }\r\n      this.addChapterDialogVisible = true\r\n    },\r\n    openUpdateChapterDialog(curData) {\r\n      this.addOrUpdateChapter = { ...curData }\r\n      this.updateChapterDialogVisible = true\r\n    },\r\n    openDeleteChapterDialog(curData) {\r\n      this.addOrUpdateChapter = { ...curData }\r\n      this.deleteChapterDialogVisible = true\r\n    },\r\n    // 上传视频\r\n    openUploadVideoDialog(curData) {\r\n      this.uploadVideoDialogTitle = `上传视频至章节[${curData.title}]`\r\n      this.uploadVideoDialogVisible = true\r\n      const data = { courseId: this.course.id, chapterId: curData.id }\r\n      setTimeout(function () {\r\n        this.$refs.UploadVideo.setData(data)\r\n      }.bind(this), 100)\r\n    },\r\n    // 上传讲义\r\n    openUploadDocumentDialog(curData) {\r\n      this.uploadDocumentDialogTitle = `上传讲义至章节[${curData.title}]`\r\n      this.uploadDocumentDialogVisible = true\r\n      const data = { courseId: this.course.id, chapterId: curData.id }\r\n      setTimeout(() => {\r\n        this.$refs.UploadDocument.setData(data)\r\n      }, 100)\r\n    },\r\n    // 上传讲义对话框关闭时更新信息\r\n    uploadDocumentDialogBeforeClose(done) {\r\n      this.change(this.$refs.UploadDocument.data.chapterId)\r\n      done()\r\n    },\r\n    openUpdateVideoDialogVisible(curData) {\r\n      this.updateVideoDialogVisible = true\r\n      this.updateVideoData = { ...curData }\r\n    },\r\n    // 新建章节\r\n    createChapter() {\r\n      this.addOrUpdateChapter.courseId = this.course.id\r\n      createChapter(this.addOrUpdateChapter).then(resp => {\r\n        this.$message.success(resp.message)\r\n        this.getChapterList()\r\n        this.addChapterDialogVisible = false\r\n      })\r\n    },\r\n    // 修改章节\r\n    updateChapter() {\r\n      this.addOrUpdateChapter.courseId = this.course.id\r\n      updateChapter(this.addOrUpdateChapter).then(resp => {\r\n        this.$message.success(resp.message)\r\n        this.getChapterList()\r\n        this.updateChapterDialogVisible = false\r\n      })\r\n    },\r\n    // 删除章节\r\n    deleteChapter() {\r\n      deleteChapter(this.addOrUpdateChapter.id).then(resp => {\r\n        this.$message.success(resp.message)\r\n        this.getChapterList()\r\n        this.deleteChapterDialogVisible = false\r\n      })\r\n    },\r\n    // 章节切换时加载视频和讲义数据\r\n    change(id) {\r\n      if (id) {\r\n        // 获取章节视频信息\r\n        listVideo(id).then(resp => {\r\n          this.chapterIdVideoMap[id] = resp.data\r\n        })\r\n        // 获取章节讲义信息\r\n        listDocument(id).then(resp => {\r\n          this.chapterIdDocumentMap[id] = resp.data\r\n        })\r\n        ++this.tableRefreshIndex\r\n      }\r\n    },\r\n    // 上传对话框关闭时更新信息\r\n    uploadDialogBeforeClose(done) {\r\n      this.change(this.$refs.UploadVideo.data.chapterId)\r\n      done()\r\n    },\r\n    // 删除视频\r\n    deleteVideo(curData) {\r\n      deleteVideo(curData.id).then(resp => {\r\n        this.$message.success(resp.message)\r\n        this.change(curData.chapterId)\r\n      })\r\n    },\r\n    // 更新视频\r\n    updateVideo() {\r\n      updateVideo(this.updateVideoData).then(resp => {\r\n        this.$message.success(resp.message)\r\n        this.change(this.updateVideoData.chapterId)\r\n        this.updateVideoDialogVisible = false\r\n      })\r\n    },\r\n    // 打开修改讲义对话框\r\n    openUpdateDocumentDialogVisible(curData) {\r\n      this.updateDocumentDialogVisible = true\r\n      this.updateDocumentData = { ...curData }\r\n    },\r\n    // 更新讲义\r\n    updateDocument() {\r\n      updateDocument(this.updateDocumentData).then(resp => {\r\n        this.$message.success(resp.message)\r\n        this.change(this.updateDocumentData.chapterId)\r\n        this.updateDocumentDialogVisible = false\r\n      })\r\n    },\r\n    // 删除讲义\r\n    deleteDocument(curData) {\r\n      deleteDocument(curData.id).then(resp => {\r\n        this.$message.success(resp.message)\r\n        this.change(curData.chapterId)\r\n      })\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.table-section {\r\n  margin-bottom: 30px;\r\n\r\n  .table-title {\r\n    font-size: 15px;\r\n    font-weight: bold;\r\n    color: #333;\r\n    margin-bottom: 10px;\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    i {\r\n      margin-right: 8px;\r\n      color: #409EFF;\r\n    }\r\n  }\r\n}\r\n\r\n.chapter-head {\r\n  .sort {\r\n    width: 7%;\r\n    font-size: 15px;\r\n  }\r\n\r\n  .title {\r\n    width: 50%;\r\n    font-size: 15px;\r\n  }\r\n\r\n  .ctrl {\r\n    width: 43%;\r\n    text-align: right;\r\n\r\n    .el-button:last-child {\r\n      margin-right: 12px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}