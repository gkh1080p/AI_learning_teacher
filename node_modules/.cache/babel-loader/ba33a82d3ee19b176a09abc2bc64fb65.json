{"remainingRequest":"E:\\ai_web\\AI_web\\AI_learning_teacher\\node_modules\\babel-loader\\lib\\index.js!E:\\ai_web\\AI_web\\AI_learning_teacher\\src\\permission.js","dependencies":[{"path":"E:\\ai_web\\AI_web\\AI_learning_teacher\\src\\permission.js","mtime":1745547073651},{"path":"E:\\ai_web\\AI_web\\AI_learning_teacher\\babel.config.js","mtime":1745490714412},{"path":"E:\\ai_web\\AI_web\\AI_learning_teacher\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745493482913},{"path":"E:\\ai_web\\AI_web\\AI_learning_teacher\\node_modules\\babel-loader\\lib\\index.js","mtime":1745493489544}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRTovYWlfd2ViL0FJX3dlYi9BSV9sZWFybmluZ190ZWFjaGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRTovYWlfd2ViL0FJX3dlYi9BSV9sZWFybmluZ190ZWFjaGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgTlByb2dyZXNzIGZyb20gJ25wcm9ncmVzcyc7IC8vIHByb2dyZXNzIGJhcgppbXBvcnQgJ25wcm9ncmVzcy9ucHJvZ3Jlc3MuY3NzJzsgLy8gcHJvZ3Jlc3MgYmFyIHN0eWxlCmltcG9ydCBnZXRQYWdlVGl0bGUgZnJvbSAnQC91dGlscy9nZXQtcGFnZS10aXRsZSc7CmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsKTlByb2dyZXNzLmNvbmZpZ3VyZSh7CiAgc2hvd1NwaW5uZXI6IGZhbHNlCn0pOyAvLyBOUHJvZ3Jlc3MgQ29uZmlndXJhdGlvbgoKdmFyIHdoaXRlTGlzdCA9IFsnL2xvZ2luJ107IC8vIG5vIHJlZGlyZWN0IHdoaXRlbGlzdAoKcm91dGVyLmJlZm9yZUVhY2goLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB2YXIgaXNMb2dpbjsKICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIC8vIHN0YXJ0IHByb2dyZXNzIGJhcgogICAgICAgICAgTlByb2dyZXNzLnN0YXJ0KCk7CiAgICAgICAgICAvLyBzZXQgcGFnZSB0aXRsZQogICAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBnZXRQYWdlVGl0bGUodG8ubWV0YS50aXRsZSk7CgogICAgICAgICAgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHVzZXIgaGFzIGxvZ2dlZCBpbgogICAgICAgICAgaXNMb2dpbiA9IE9iamVjdC5rZXlzKHN0b3JlLmdldHRlcnMudXNlcikubGVuZ3RoICE9PSAwOyAvLyBjb25zdCBpc0xvZ2luPXRydWUKICAgICAgICAgIGlmICghaXNMb2dpbikgewogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodG8ucGF0aCA9PT0gJy9sb2dpbicpIHsKICAgICAgICAgICAgLy8gaWYgaXMgbG9nZ2VkIGluLCByZWRpcmVjdCB0byB0aGUgaG9tZSBwYWdlCiAgICAgICAgICAgIG5leHQoewogICAgICAgICAgICAgIHBhdGg6ICcvJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgTlByb2dyZXNzLmRvbmUoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgIH0KICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgNzoKICAgICAgICAgIGlmICghKHdoaXRlTGlzdC5pbmRleE9mKHRvLnBhdGgpICE9PSAtMSkpIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIC8vIGluIHRoZSBmcmVlIGxvZ2luIHdoaXRlbGlzdCwgZ28gZGlyZWN0bHkKICAgICAgICAgIG5leHQoKTsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMTE6CiAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTE7CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3VzZXIvZ2V0SW5mbycpOwogICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDE3OgogICAgICAgICAgX2NvbnRleHQucHJldiA9IDE3OwogICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxMSk7CiAgICAgICAgICBNZXNzYWdlLmVycm9yKF9jb250ZXh0LnQwIHx8ICdIYXMgRXJyb3InKTsKICAgICAgICAgIG5leHQoIi9sb2dpbj9yZWRpcmVjdD0iLmNvbmNhdCh0by5wYXRoKSk7CiAgICAgICAgICBOUHJvZ3Jlc3MuZG9uZSgpOwogICAgICAgIGNhc2UgMjI6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgIH0KICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMTEsIDE3XV0pOwogIH0pKTsKICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94MykgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOwpyb3V0ZXIuYWZ0ZXJFYWNoKGZ1bmN0aW9uICgpIHsKICAvLyBmaW5pc2ggcHJvZ3Jlc3MgYmFyCiAgTlByb2dyZXNzLmRvbmUoKTsKfSk7"},{"version":3,"names":["router","store","NProgress","getPageTitle","Message","configure","showSpinner","whiteList","beforeEach","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","to","from","next","isLogin","wrap","_callee$","_context","prev","start","document","title","meta","Object","keys","getters","user","length","path","done","indexOf","dispatch","t0","error","concat","stop","_x","_x2","_x3","apply","arguments","afterEach"],"sources":["E:/ai_web/AI_web/AI_learning_teacher/src/permission.js"],"sourcesContent":["import router from '@/router'\r\nimport store from '@/store'\r\nimport NProgress from 'nprogress' // progress bar\r\nimport 'nprogress/nprogress.css' // progress bar style\r\nimport getPageTitle from '@/utils/get-page-title'\r\nimport { Message } from 'element-ui'\r\n\r\nNProgress.configure({ showSpinner: false }) // NProgress Configuration\r\n\r\nconst whiteList = ['/login'] // no redirect whitelist\r\n\r\nrouter.beforeEach(async(to, from, next) => {\r\n  // start progress bar\r\n  NProgress.start()\r\n  // set page title\r\n  document.title = getPageTitle(to.meta.title)\r\n\r\n  // determine whether the user has logged in\r\n  const isLogin = Object.keys(store.getters.user).length !== 0\r\n  // const isLogin=true\r\n  if (isLogin) {\r\n    if (to.path === '/login') {\r\n      // if is logged in, redirect to the home page\r\n      next({ path: '/' })\r\n      NProgress.done()\r\n    } else {\r\n      next()\r\n    }\r\n  } else {\r\n    if (whiteList.indexOf(to.path) !== -1) {\r\n      // in the free login whitelist, go directly\r\n      next()\r\n    } else {\r\n      // other pages that do not have permission to access are redirected to the login page.\r\n      try {\r\n        // logged in, get user info\r\n        await store.dispatch('user/getInfo')\r\n        next()\r\n      } catch (error) {\r\n        Message.error(error || 'Has Error')\r\n        next(`/login?redirect=${to.path}`)\r\n        NProgress.done()\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\nrouter.afterEach(() => {\r\n  // finish progress bar\r\n  NProgress.done()\r\n})\r\n"],"mappings":";;;AAAA,OAAOA,MAAM,MAAM,UAAU;AAC7B,OAAOC,KAAK,MAAM,SAAS;AAC3B,OAAOC,SAAS,MAAM,WAAW,EAAC;AAClC,OAAO,yBAAyB,EAAC;AACjC,OAAOC,YAAY,MAAM,wBAAwB;AACjD,SAASC,OAAO,QAAQ,YAAY;AAEpCF,SAAS,CAACG,SAAS,CAAC;EAAEC,WAAW,EAAE;AAAM,CAAC,CAAC,EAAC;;AAE5C,IAAMC,SAAS,GAAG,CAAC,QAAQ,CAAC,EAAC;;AAE7BP,MAAM,CAACQ,UAAU;EAAA,IAAAC,IAAA,GAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAC,SAAAC,QAAMC,EAAE,EAAEC,IAAI,EAAEC,IAAI;IAAA,IAAAC,OAAA;IAAA,OAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAJ,IAAA;QAAA;UACpC;UACAd,SAAS,CAACoB,KAAK,CAAC,CAAC;UACjB;UACAC,QAAQ,CAACC,KAAK,GAAGrB,YAAY,CAACW,EAAE,CAACW,IAAI,CAACD,KAAK,CAAC;;UAE5C;UACMP,OAAO,GAAGS,MAAM,CAACC,IAAI,CAAC1B,KAAK,CAAC2B,OAAO,CAACC,IAAI,CAAC,CAACC,MAAM,KAAK,CAAC,EAC5D;UAAA,KACIb,OAAO;YAAAG,QAAA,CAAAJ,IAAA;YAAA;UAAA;UACT,IAAIF,EAAE,CAACiB,IAAI,KAAK,QAAQ,EAAE;YACxB;YACAf,IAAI,CAAC;cAAEe,IAAI,EAAE;YAAI,CAAC,CAAC;YACnB7B,SAAS,CAAC8B,IAAI,CAAC,CAAC;UAClB,CAAC,MAAM;YACLhB,IAAI,CAAC,CAAC;UACR;UAACI,QAAA,CAAAJ,IAAA;UAAA;QAAA;UAAA,MAEGT,SAAS,CAAC0B,OAAO,CAACnB,EAAE,CAACiB,IAAI,CAAC,KAAK,CAAC,CAAC;YAAAX,QAAA,CAAAJ,IAAA;YAAA;UAAA;UACnC;UACAA,IAAI,CAAC,CAAC;UAAAI,QAAA,CAAAJ,IAAA;UAAA;QAAA;UAAAI,QAAA,CAAAC,IAAA;UAAAD,QAAA,CAAAJ,IAAA;UAAA,OAKEf,KAAK,CAACiC,QAAQ,CAAC,cAAc,CAAC;QAAA;UACpClB,IAAI,CAAC,CAAC;UAAAI,QAAA,CAAAJ,IAAA;UAAA;QAAA;UAAAI,QAAA,CAAAC,IAAA;UAAAD,QAAA,CAAAe,EAAA,GAAAf,QAAA;UAENhB,OAAO,CAACgC,KAAK,CAAChB,QAAA,CAAAe,EAAA,IAAS,WAAW,CAAC;UACnCnB,IAAI,oBAAAqB,MAAA,CAAoBvB,EAAE,CAACiB,IAAI,CAAE,CAAC;UAClC7B,SAAS,CAAC8B,IAAI,CAAC,CAAC;QAAA;QAAA;UAAA,OAAAZ,QAAA,CAAAkB,IAAA;MAAA;IAAA,GAAAzB,OAAA;EAAA,CAIvB;EAAA,iBAAA0B,EAAA,EAAAC,GAAA,EAAAC,GAAA;IAAA,OAAAhC,IAAA,CAAAiC,KAAA,OAAAC,SAAA;EAAA;AAAA,IAAC;AAEF3C,MAAM,CAAC4C,SAAS,CAAC,YAAM;EACrB;EACA1C,SAAS,CAAC8B,IAAI,CAAC,CAAC;AAClB,CAAC,CAAC","ignoreList":[]}]}