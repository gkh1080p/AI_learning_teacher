{"remainingRequest":"E:\\ai_web\\AI_web\\AI_learning_teacher\\node_modules\\babel-loader\\lib\\index.js!E:\\ai_web\\AI_web\\AI_learning_teacher\\src\\permission.js","dependencies":[{"path":"E:\\ai_web\\AI_web\\AI_learning_teacher\\src\\permission.js","mtime":1745491390114},{"path":"E:\\ai_web\\AI_web\\AI_learning_teacher\\babel.config.js","mtime":1745490714412},{"path":"E:\\ai_web\\AI_web\\AI_learning_teacher\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745493482913},{"path":"E:\\ai_web\\AI_web\\AI_learning_teacher\\node_modules\\babel-loader\\lib\\index.js","mtime":1745493489544}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRTovYWlfd2ViL0FJX3dlYi9BSV9sZWFybmluZ190ZWFjaGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRTovYWlfd2ViL0FJX3dlYi9BSV9sZWFybmluZ190ZWFjaGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKaW1wb3J0IE5Qcm9ncmVzcyBmcm9tICducHJvZ3Jlc3MnOyAvLyBwcm9ncmVzcyBiYXIKaW1wb3J0ICducHJvZ3Jlc3MvbnByb2dyZXNzLmNzcyc7IC8vIHByb2dyZXNzIGJhciBzdHlsZQppbXBvcnQgZ2V0UGFnZVRpdGxlIGZyb20gJ0AvdXRpbHMvZ2V0LXBhZ2UtdGl0bGUnOwppbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAnZWxlbWVudC11aSc7Ck5Qcm9ncmVzcy5jb25maWd1cmUoewogIHNob3dTcGlubmVyOiBmYWxzZQp9KTsgLy8gTlByb2dyZXNzIENvbmZpZ3VyYXRpb24KCnZhciB3aGl0ZUxpc3QgPSBbJy9sb2dpbiddOyAvLyBubyByZWRpcmVjdCB3aGl0ZWxpc3QKCnJvdXRlci5iZWZvcmVFYWNoKC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh0bywgZnJvbSwgbmV4dCkgewogICAgdmFyIGlzTG9naW47CiAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICAvLyBzdGFydCBwcm9ncmVzcyBiYXIKICAgICAgICAgIE5Qcm9ncmVzcy5zdGFydCgpOwogICAgICAgICAgLy8gc2V0IHBhZ2UgdGl0bGUKICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gZ2V0UGFnZVRpdGxlKHRvLm1ldGEudGl0bGUpOwoKICAgICAgICAgIC8vIGRldGVybWluZSB3aGV0aGVyIHRoZSB1c2VyIGhhcyBsb2dnZWQgaW4KICAgICAgICAgIC8vIGNvbnN0IGlzTG9naW4gPSBPYmplY3Qua2V5cyhzdG9yZS5nZXR0ZXJzLnVzZXIpLmxlbmd0aCAhPT0gMAogICAgICAgICAgaXNMb2dpbiA9IHRydWU7CiAgICAgICAgICBpZiAoIWlzTG9naW4pIHsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRvLnBhdGggPT09ICcvbG9naW4nKSB7CiAgICAgICAgICAgIC8vIGlmIGlzIGxvZ2dlZCBpbiwgcmVkaXJlY3QgdG8gdGhlIGhvbWUgcGFnZQogICAgICAgICAgICBuZXh0KHsKICAgICAgICAgICAgICBwYXRoOiAnLycKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICB9CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBpZiAoISh3aGl0ZUxpc3QuaW5kZXhPZih0by5wYXRoKSAhPT0gLTEpKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBpbiB0aGUgZnJlZSBsb2dpbiB3aGl0ZWxpc3QsIGdvIGRpcmVjdGx5CiAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDExOgogICAgICAgICAgX2NvbnRleHQucHJldiA9IDExOwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCd1c2VyL2dldEluZm8nKTsKICAgICAgICBjYXNlIDE0OgogICAgICAgICAgbmV4dCgpOwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIyOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAxNzoKICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNzsKICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMTEpOwogICAgICAgICAgTWVzc2FnZS5lcnJvcihfY29udGV4dC50MCB8fCAnSGFzIEVycm9yJyk7CiAgICAgICAgICBuZXh0KCIvbG9naW4/cmVkaXJlY3Q9Ii5jb25jYXQodG8ucGF0aCkpOwogICAgICAgICAgTlByb2dyZXNzLmRvbmUoKTsKICAgICAgICBjYXNlIDIyOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICB9CiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzExLCAxN11dKTsKICB9KSk7CiAgcmV0dXJuIGZ1bmN0aW9uIChfeCwgX3gyLCBfeDMpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpKTsKcm91dGVyLmFmdGVyRWFjaChmdW5jdGlvbiAoKSB7CiAgLy8gZmluaXNoIHByb2dyZXNzIGJhcgogIE5Qcm9ncmVzcy5kb25lKCk7Cn0pOw=="},{"version":3,"names":["router","store","NProgress","getPageTitle","Message","configure","showSpinner","whiteList","beforeEach","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","to","from","next","isLogin","wrap","_callee$","_context","prev","start","document","title","meta","path","done","indexOf","dispatch","t0","error","concat","stop","_x","_x2","_x3","apply","arguments","afterEach"],"sources":["E:/ai_web/AI_web/AI_learning_teacher/src/permission.js"],"sourcesContent":["import router from '@/router'\r\nimport store from '@/store'\r\nimport NProgress from 'nprogress' // progress bar\r\nimport 'nprogress/nprogress.css' // progress bar style\r\nimport getPageTitle from '@/utils/get-page-title'\r\nimport { Message } from 'element-ui'\r\n\r\nNProgress.configure({ showSpinner: false }) // NProgress Configuration\r\n\r\nconst whiteList = ['/login'] // no redirect whitelist\r\n\r\nrouter.beforeEach(async(to, from, next) => {\r\n  // start progress bar\r\n  NProgress.start()\r\n  // set page title\r\n  document.title = getPageTitle(to.meta.title)\r\n\r\n  // determine whether the user has logged in\r\n  // const isLogin = Object.keys(store.getters.user).length !== 0\r\n  const isLogin=true\r\n  if (isLogin) {\r\n    if (to.path === '/login') {\r\n      // if is logged in, redirect to the home page\r\n      next({ path: '/' })\r\n      NProgress.done()\r\n    } else {\r\n      next()\r\n    }\r\n  } else {\r\n    if (whiteList.indexOf(to.path) !== -1) {\r\n      // in the free login whitelist, go directly\r\n      next()\r\n    } else {\r\n      // other pages that do not have permission to access are redirected to the login page.\r\n      try {\r\n        // logged in, get user info\r\n        await store.dispatch('user/getInfo')\r\n        next()\r\n      } catch (error) {\r\n        Message.error(error || 'Has Error')\r\n        next(`/login?redirect=${to.path}`)\r\n        NProgress.done()\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\nrouter.afterEach(() => {\r\n  // finish progress bar\r\n  NProgress.done()\r\n})\r\n"],"mappings":";;AAAA,OAAOA,MAAM,MAAM,UAAU;AAC7B,OAAOC,KAAK,MAAM,SAAS;AAC3B,OAAOC,SAAS,MAAM,WAAW,EAAC;AAClC,OAAO,yBAAyB,EAAC;AACjC,OAAOC,YAAY,MAAM,wBAAwB;AACjD,SAASC,OAAO,QAAQ,YAAY;AAEpCF,SAAS,CAACG,SAAS,CAAC;EAAEC,WAAW,EAAE;AAAM,CAAC,CAAC,EAAC;;AAE5C,IAAMC,SAAS,GAAG,CAAC,QAAQ,CAAC,EAAC;;AAE7BP,MAAM,CAACQ,UAAU;EAAA,IAAAC,IAAA,GAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAC,SAAAC,QAAMC,EAAE,EAAEC,IAAI,EAAEC,IAAI;IAAA,IAAAC,OAAA;IAAA,OAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAJ,IAAA;QAAA;UACpC;UACAd,SAAS,CAACoB,KAAK,CAAC,CAAC;UACjB;UACAC,QAAQ,CAACC,KAAK,GAAGrB,YAAY,CAACW,EAAE,CAACW,IAAI,CAACD,KAAK,CAAC;;UAE5C;UACA;UACMP,OAAO,GAAC,IAAI;UAAA,KACdA,OAAO;YAAAG,QAAA,CAAAJ,IAAA;YAAA;UAAA;UACT,IAAIF,EAAE,CAACY,IAAI,KAAK,QAAQ,EAAE;YACxB;YACAV,IAAI,CAAC;cAAEU,IAAI,EAAE;YAAI,CAAC,CAAC;YACnBxB,SAAS,CAACyB,IAAI,CAAC,CAAC;UAClB,CAAC,MAAM;YACLX,IAAI,CAAC,CAAC;UACR;UAACI,QAAA,CAAAJ,IAAA;UAAA;QAAA;UAAA,MAEGT,SAAS,CAACqB,OAAO,CAACd,EAAE,CAACY,IAAI,CAAC,KAAK,CAAC,CAAC;YAAAN,QAAA,CAAAJ,IAAA;YAAA;UAAA;UACnC;UACAA,IAAI,CAAC,CAAC;UAAAI,QAAA,CAAAJ,IAAA;UAAA;QAAA;UAAAI,QAAA,CAAAC,IAAA;UAAAD,QAAA,CAAAJ,IAAA;UAAA,OAKEf,KAAK,CAAC4B,QAAQ,CAAC,cAAc,CAAC;QAAA;UACpCb,IAAI,CAAC,CAAC;UAAAI,QAAA,CAAAJ,IAAA;UAAA;QAAA;UAAAI,QAAA,CAAAC,IAAA;UAAAD,QAAA,CAAAU,EAAA,GAAAV,QAAA;UAENhB,OAAO,CAAC2B,KAAK,CAACX,QAAA,CAAAU,EAAA,IAAS,WAAW,CAAC;UACnCd,IAAI,oBAAAgB,MAAA,CAAoBlB,EAAE,CAACY,IAAI,CAAE,CAAC;UAClCxB,SAAS,CAACyB,IAAI,CAAC,CAAC;QAAA;QAAA;UAAA,OAAAP,QAAA,CAAAa,IAAA;MAAA;IAAA,GAAApB,OAAA;EAAA,CAIvB;EAAA,iBAAAqB,EAAA,EAAAC,GAAA,EAAAC,GAAA;IAAA,OAAA3B,IAAA,CAAA4B,KAAA,OAAAC,SAAA;EAAA;AAAA,IAAC;AAEFtC,MAAM,CAACuC,SAAS,CAAC,YAAM;EACrB;EACArC,SAAS,CAACyB,IAAI,CAAC,CAAC;AAClB,CAAC,CAAC","ignoreList":[]}]}